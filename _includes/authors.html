
{% for author in include.authors %}
{% if forloop.length == 1 %}
  {% if author.last == site.scholar.last_name %}
    <em>{{author.last}}, {{author.first}}</em>
  {% else %}
    {{author.last}}, {{author.first}}
  {% endif %}
{% else %}
  {% unless forloop.last %}
    {% if author.last == site.scholar.last_name %}
      <em>{{author.last}}, {{author.first}}</em>,
    {% else %}
      {% if site.data.coauthors[author.last] %}
        <a href="{{site.data.coauthors[author.last].url}}" target="_blank">{{author.last}}, {{author.first}}</a>, 
      {% else %}
        {{author.last}}, {{author.first}},
      {% endif %}
    {% endif %}
  {% else %}
    {% if author.last == site.scholar.last_name %}
      and <em>{{author.last}}, {{author.first}}</em>
    {% else %}
      {% if site.data.coauthors[author.last] %}
        and <a href="{{site.data.coauthors[author.last].url}}" target="_blank">{{author.last}}, {{author.first}}</a> 
      {% else %}
        and {{author.last}}, {{author.first}}
      {% endif %}
    {% endif %}
  {% endunless %}
{% endif %}
{% endfor %}
